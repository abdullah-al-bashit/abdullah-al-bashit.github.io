<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abdullah Al Bashit - Northeastern University</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Georgia', 'Palatino', serif;
            line-height: 1.65;
            color: #333;
            background: #fff;
        }
        
        .container { max-width: 950px; margin: 0 auto; padding: 40px 20px; }
        
        header {
            text-align: center;
            padding: 50px 0 30px;
            border-bottom: 2px solid #800020;
        }
        
        .profile-photo {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 25px;
            border: 4px solid #800020;
        }
        
        h1 {
            font-size: 2.4em;
            margin-bottom: 12px;
            color: #800020;
            font-weight: normal;
        }
        
        .title { font-size: 1.15em; color: #555; margin-bottom: 20px; line-height: 1.5; }
        .contact-info { margin-top: 25px; font-size: 0.95em; color: #666; }
        .contact-info a { color: #800020; text-decoration: none; }
        .contact-info a:hover { text-decoration: underline; }
        
        nav {
            margin: 35px 0;
            padding: 18px 0;
            border-bottom: 1px solid #ddd;
            text-align: center;
        }
        nav a { margin: 0 18px; color: #800020; text-decoration: none; font-size: 1em; }
        nav a:hover { text-decoration: underline; }
        
        section { margin: 55px 0; }
        
        h2 {
            font-size: 1.7em;
            color: #800020;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 2px solid #800020;
            font-weight: normal;
        }
        
        h3 {
            font-size: 1.25em;
            color: #444;
            margin: 30px 0 18px;
            font-weight: normal;
            font-style: italic;
        }
        
        .pub-item, .talk-item, .edu-item, .award-item {
            margin-bottom: 28px;
            line-height: 1.7;
        }
        
        .pub-item a, .talk-item a { color: #333; text-decoration: none; }
        .pub-item a:hover, .talk-item a:hover { color: #800020; }
        
        .pub-number {
            display: inline-block;
            min-width: 35px;
            font-weight: bold;
            color: #800020;
        }
        
        .edu-dates { color: #800020; font-weight: bold; margin-bottom: 5px; }
        .edu-degree { font-size: 1.05em; margin-bottom: 8px; }
        .edu-thesis { margin-top: 8px; font-style: italic; color: #555; }
        
        .loading { text-align: center; padding: 40px; color: #999; }
        
        footer {
            text-align: center;
            padding: 50px 0;
            margin-top: 70px;
            border-top: 1px solid #ddd;
            color: #777;
            font-size: 0.9em;
        }
        
        @media (max-width: 768px) {
            .container { padding: 20px 15px; }
            h1 { font-size: 2em; }
            nav a { display: inline-block; margin: 8px 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <img src="photo.jpg" alt="Abdullah Al Bashit" class="profile-photo">
            <h1>Abdullah Al Bashit</h1>
            <p class="title">Postdoctoral Research Associate<br>
            Makowski Laboratory, Department of Bioengineering<br>
            Northeastern University</p>
            <div class="contact-info">
                <p>360 Huntington Avenue, Boston, MA 02115</p>
                <p>Email: <a href="mailto:albashit.a@northeastern.edu">albashit.a@northeastern.edu</a></p>
                <p><a href="cv.pdf">Download CV (PDF)</a></p>
            </div>
        </header>

        <nav>
            <a href="#about">About</a>
            <a href="#research">Research</a>
            <a href="#publications">Publications</a>
            <a href="#talks">Presentations</a>
            <a href="#education">Education</a>
            <a href="#awards">Awards</a>
        </nav>

        <section id="about">
            <h2>About</h2>
            <p>I am a Postdoctoral Research Associate in the Makowski Laboratory at Northeastern University, where I recently completed my Ph.D. in Electrical Engineering (December 2024). My research focuses on developing computational and signal processing methods to characterize pathological protein structures in Alzheimer's disease using X-ray scattering techniques.</p>
        </section>

        <section id="research">
            <h2>Research Support</h2>
            <div id="research-content" class="loading">Loading...</div>
        </section>

        <section id="publications">
            <h2>Publications</h2>
            <div id="publications-content" class="loading">Loading...</div>
        </section>

        <section id="talks">
            <h2>Conference Talks</h2>
            <div id="talks-content" class="loading">Loading...</div>
        </section>

        <section id="education">
            <h2>Education</h2>
            <div id="education-content" class="loading">Loading...</div>
        </section>

        <section id="awards">
            <h2>Honors & Awards</h2>
            <div id="awards-content" class="loading">Loading...</div>
        </section>

        <footer>
            <p>Last updated: November 2024</p>
            <p>© 2024 Abdullah Al Bashit</p>
        </footer>
    </div>

    <script>
        // LaTeX Parser
        class LatexParser {
            parseLatex(latex) {
                let html = latex;
                
                // Remove end-of-line comments (but not escaped %)
                html = html.replace(/(?<!\\)%[^\n]*/g, '');
                
                // Parse nested \href{\textcolor{}} structures
                // This handles: \href{url}{\textcolor{black}{text}}
                let changed = true;
                while (changed) {
                    changed = false;
                    const before = html;
                    
                    // Extract innermost \textcolor first
                    html = html.replace(/\\textcolor\{([^{}]+)\}\{([^{}]+)\}/g, '$2');
                    
                    // Then extract \href
                    html = html.replace(/\\href\{([^{}]+)\}\{([^{}]+)\}/g, '<a href="$1">$2</a>');
                    
                    if (before !== html) changed = true;
                }
                
                // Parse \textbf{text}
                html = html.replace(/\\textbf\{([^{}]+)\}/g, '<strong>$1</strong>');
                
                // Parse \textit{text}
                html = html.replace(/\\textit\{([^{}]+)\}/g, '<em>$1</em>');
                
                // Parse LaTeX quotes
                html = html.replace(/``/g, '"').replace(/''/g, '"');
                
                // Parse special characters
                html = html.replace(/\$\\beta\$/g, 'β');
                html = html.replace(/\$\\bm\{\\beta\}\$/g, 'β');
                html = html.replace(/\\&/g, '&');
                html = html.replace(/\\\\/g, '<br>');
                html = html.replace(/\\%/g, '%');
                
                // Clean up extra spaces and newlines
                html = html.replace(/\s+/g, ' ');
                html = html.replace(/\s*,\s*/g, ', ');
                
                return html.trim();
            }

            extractItems(text, command) {
                const items = [];
                const pattern = `\\${command}{`;
                let pos = 0;
                
                // First, remove commented-out sections (lines starting with %)
                const lines = text.split('\n');
                const activeLines = [];
                let inComment = false;
                
                for (const line of lines) {
                    const trimmed = line.trim();
                    if (trimmed.startsWith('%')) {
                        continue; // Skip commented lines
                    }
                    activeLines.push(line);
                }
                
                text = activeLines.join('\n');
                
                while ((pos = text.indexOf(pattern, pos)) !== -1) {
                    pos += pattern.length;
                    let braceCount = 1;
                    let content = '';
                    let i = pos;
                    
                    // Skip optional % and whitespace at the start
                    while (i < text.length && (text[i] === '%' || text[i] === '\n' || text[i] === ' ' || text[i] === '\t')) {
                        i++;
                    }
                    
                    while (i < text.length && braceCount > 0) {
                        const char = text[i];
                        const prevChar = i > 0 ? text[i-1] : '';
                        
                        // Don't count escaped braces
                        if (char === '{' && prevChar !== '\\') {
                            braceCount++;
                            content += char;
                        } else if (char === '}' && prevChar !== '\\') {
                            braceCount--;
                            if (braceCount === 0) {
                                break;
                            }
                            content += char;
                        } else {
                            content += char;
                        }
                        i++;
                    }
                    
                    if (content.trim()) {
                        items.push(content.trim());
                    }
                    pos = i;
                }
                
                return items;
            }

            extractCvItems(text) {
                const items = [];
                const pattern = '\\cvitem{';
                let pos = 0;
                
                while ((pos = text.indexOf(pattern, pos)) !== -1) {
                    pos += pattern.length;
                    
                    // Extract first argument (date)
                    let braceCount = 1;
                    let date = '';
                    let i = pos;
                    
                    while (i < text.length && braceCount > 0) {
                        if (text[i] === '{' && text[i-1] !== '\\') {
                            braceCount++;
                        } else if (text[i] === '}' && text[i-1] !== '\\') {
                            braceCount--;
                            if (braceCount === 0) break;
                        }
                        date += text[i];
                        i++;
                    }
                    
                    // Skip to second argument
                    i++; // skip closing }
                    if (text[i] === '{') {
                        i++; // skip opening {
                        if (text[i] === '%') i++; // skip optional %
                        if (text[i] === '\n') i++; // skip newline
                        
                        braceCount = 1;
                        let content = '';
                        
                        while (i < text.length && braceCount > 0) {
                            if (text[i] === '{' && text[i-1] !== '\\') {
                                braceCount++;
                            } else if (text[i] === '}' && text[i-1] !== '\\') {
                                braceCount--;
                                if (braceCount === 0) break;
                            }
                            content += text[i];
                            i++;
                        }
                        
                        if (date.trim() && content.trim()) {
                            items.push({
                                date: date.trim(),
                                content: content.trim()
                            });
                        }
                    }
                    
                    pos = i;
                }
                
                return items;
            }
        }

        // Content Generators
        class ContentGenerator {
            constructor(parser) {
                this.parser = parser;
            }

            generatePublications(latex) {
                const jpubs = this.parser.extractItems(latex, 'jpub');
                const cpubs = this.parser.extractItems(latex, 'cpub');
                
                let html = '';
                let jCounter = jpubs.length;
                
                // Separate publications by status
                const underReview = jpubs.filter(p => p.includes('under review'));
                const inPrep = jpubs.filter(p => p.includes('in preparation'));
                const published = jpubs.filter(p => !p.includes('under review') && !p.includes('in preparation'));
                
                if (underReview.length > 0) {
                    html += '<h3>Under Review</h3>';
                    underReview.forEach(pub => {
                        html += `<div class="pub-item"><span class="pub-number">[J${jCounter--}]</span> ${this.parser.parseLatex(pub)}</div>`;
                    });
                }
                
                if (published.length > 0) {
                    html += '<h3>Published</h3>';
                    published.forEach(pub => {
                        html += `<div class="pub-item"><span class="pub-number">[J${jCounter--}]</span> ${this.parser.parseLatex(pub)}</div>`;
                    });
                }
                
                if (inPrep.length > 0) {
                    html += '<h3>In Preparation</h3>';
                    inPrep.forEach(pub => {
                        html += `<div class="pub-item"><span class="pub-number">[J${jCounter--}]</span> ${this.parser.parseLatex(pub)}</div>`;
                    });
                }
                
                if (cpubs.length > 0) {
                    html += '<h3 style="margin-top: 40px;">Conference Publications</h3>';
                    let cCounter = cpubs.length;
                    cpubs.forEach(pub => {
                        html += `<div class="pub-item"><span class="pub-number">[C${cCounter--}]</span> ${this.parser.parseLatex(pub)}</div>`;
                    });
                }
                
                return html;
            }

            generateTalks(latex) {
                const talks = this.parser.extractItems(latex, 'talk');
                let html = '';
                let counter = talks.length;
                
                talks.forEach(talk => {
                    html += `<div class="talk-item"><span class="pub-number">[T${counter--}]</span> ${this.parser.parseLatex(talk)}</div>`;
                });
                
                return html;
            }

            generateEducation(latex) {
                const items = this.parser.extractCvItems(latex);
                let html = '';
                
                items.forEach(item => {
                    html += `<div class="edu-item">
                        <div class="edu-dates">${item.date}</div>
                        <div class="edu-degree">${this.parser.parseLatex(item.content)}</div>
                    </div>`;
                });
                
                return html;
            }

            generateAwards(latex) {
                const items = this.parser.extractCvItems(latex);
                let html = '';
                
                items.forEach(item => {
                    html += `<div class="award-item">
                        <div class="edu-dates">${item.date}</div>
                        ${this.parser.parseLatex(item.content)}
                    </div>`;
                });
                
                return html;
            }

            generateResearch(latex) {
                const items = this.parser.extractCvItems(latex);
                let html = '';
                
                items.forEach(item => {
                    html += `<div class="pub-item">
                        <div class="edu-dates">${item.date}</div>
                        ${this.parser.parseLatex(item.content)}
                    </div>`;
                });
                
                return html;
            }
        }

        // File Loader
        class FileLoader {
            async loadTexFile(path) {
                try {
                    const response = await fetch(path);
                    if (!response.ok) {
                        throw new Error(`Failed to load ${path}`);
                    }
                    return await response.text();
                } catch (error) {
                    console.error(`Error loading ${path}:`, error);
                    return null;
                }
            }

            async loadAllSections() {
                const sections = {
                    grants: await this.loadTexFile('sections/grants.tex'),
                    journal_pubs: await this.loadTexFile('sections/journal_publications.tex'),
                    conf_pubs: await this.loadTexFile('sections/conference_publications.tex'),
                    talks: await this.loadTexFile('sections/conference_talks.tex'),
                    education: await this.loadTexFile('sections/education.tex'),
                    awards: await this.loadTexFile('sections/awards.tex')
                };
                
                return sections;
            }
        }

        // Main Application
        async function initializeWebsite() {
            const parser = new LatexParser();
            const generator = new ContentGenerator(parser);
            const loader = new FileLoader();

            try {
                // Load all .tex files
                const sections = await loader.loadAllSections();

                // Generate content
                if (sections.grants) {
                    document.getElementById('research-content').innerHTML = generator.generateResearch(sections.grants);
                }

                if (sections.journal_pubs && sections.conf_pubs) {
                    const combinedPubs = sections.journal_pubs + '\n' + sections.conf_pubs;
                    document.getElementById('publications-content').innerHTML = generator.generatePublications(combinedPubs);
                }

                if (sections.talks) {
                    document.getElementById('talks-content').innerHTML = generator.generateTalks(sections.talks);
                }

                if (sections.education) {
                    document.getElementById('education-content').innerHTML = generator.generateEducation(sections.education);
                }

                if (sections.awards) {
                    document.getElementById('awards-content').innerHTML = generator.generateAwards(sections.awards);
                }

            } catch (error) {
                console.error('Error initializing website:', error);
                document.querySelectorAll('.loading').forEach(el => {
                    el.innerHTML = '<p style="color: #c00;">Error loading content. Please ensure files are served from a web server.</p>';
                });
            }
        }

        // Initialize when page loads
        window.addEventListener('DOMContentLoaded', initializeWebsite);
    </script>
</body>
</html>
